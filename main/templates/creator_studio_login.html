<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    {% load static %}
</head>
<style>
    body{
        background: #04070D;
        margin: 0;
    }
    .parent{
        display: flex;
        justify-content: space-around;
        align-items: center;
        min-height: 100dvh;
        gap: 40px;
        flex-wrap: wrap;
    }
    img{
        width: 439px;
        margin-top: 10px;
    }
    .child{
        display: flex;
        border-width: 1px;
        flex-direction: column;
        background: linear-gradient(109.46deg, rgba(201, 201, 201, 0.3) 1.57%, rgba(196, 196, 196, 0.1) 100%);
        border-style: solid;
        padding:40px;
        border-radius: 27px;
        border-image-source: linear-gradient(108.87deg, rgba(255, 255, 255, 0.8) 0.66%, rgba(211, 211, 211, 0.1) 99.48%);
    }
    #label_icon{
        font-family: Inter;
        font-weight: 500;
        font-size: 32px;
        color: white;
        margin-bottom: 10px;
    }
    #app_msg{
        font-family: Inter;
        font-weight: 300;
        font-size: 16px;
        color: #D5DBE6;
        margin-bottom: 28px;
    }
    #email_label,#password_label,#fullname,#email_input,#confirm_password_label,#residence_label,#displayname,#password_label_again,#source_label{
        font-family: Inter;
        font-weight: 400;
        font-size: 16px;
        color: white;
        margin-bottom: 8px;
    }
    .star{
        font-weight: 400;
        font-size: 16px;
        font-family: Inter;
        color: #FF0000;
    }
    .log_in_info{
        display: flex;
        flex-direction: column;
        width: 614px;
    }
    #email,#password,#fullname_input,#email_address_input,#confirm_password_input,#displayname_input,#residence,#password_input,#source_input,#dialog input{
        background: linear-gradient(109.46deg, rgba(201, 201, 201, 0.4) 1.57%, rgba(196, 196, 196, 0.1) 100%);
        opacity: 1;
        border-radius: 7px;
        padding: 12px 16px 12px 16px;
        color: white;
        font-size: 16px;
        backdrop-filter: blur(60px);
        border: 1px solid transparent;
        border-image-slice: 1;
        border-image-source: linear-gradient(108.87deg, rgba(255, 255, 255, 0.8) 0.66%, rgba(211, 211, 211, 0.1) 99.48%);
    }
    #fullname_input,#email_address_input,#confirm_password_input,#displayname_input,#residence,#password_input{
        width: 264px;
    }
    #dialog input::placeholder,
    #email::placeholder,
    #password::placeholder,
    #fullname_input::placeholder,
    #email_address_input::placeholder,
    #confirm_password_input::placeholder,
    #displayname_input::placeholder,
    #residence::placeholder,
    #password_input::placeholder{
        color: white;
    }

    #email,#fullname_input,#email_address_input,#confirm_password_input,#displayname_input,#residence,#password_input,#source_input{
        margin-bottom: 16px;
    }
    #password{
        margin-bottom: 20px;
    }
    #remember_input{
        width: 16px;
        height: 16px;
        margin-right: 10px;
        border-radius: 4px;
        accent-color: #CB102B;
        cursor: pointer;
    }
    button{
        cursor: pointer;
    }
    .remember{
        display: flex;
        align-items: center;
        margin-bottom: 40px;
        font-size: 16px;
    }
    #log_in_button{
        background: #CB102B;
        padding: 12px;
        border-radius: 8px;
        color: white;
        font-size: 16px;
        border: 1px solid #CB102B;
        font-size: 16px;
        font-family: Inter;
        margin-bottom: 15px;
    }
    #sign_up_button{
        font-family: Inter;
        color: white;
        font-size: 16px;
        border-radius: 8px;
        padding: 12px;
        border: 1px solid transparent;
        border-image-slice: 1;
        border-image-source: linear-gradient(90deg, #090F1A 0%, #A7AFBC 49.04%, #090F1A 100%);
        background: linear-gradient(109.46deg, rgba(201, 201, 201, 0.3) 1.57%, rgba(196, 196, 196, 0.1) 100%);
    }
    .sign_up_info{
        display: flex;
        justify-content: center;
        gap: 16px;
        flex-wrap:wrap;
    }
    .sign_up_info_1,.sign_up_info_2{
        flex: 1;
        display: flex;
        flex-direction: column;
    }
    #dialog{
        background: linear-gradient(109.46deg, rgba(201, 201, 201, 0.4) 1.57%, rgba(196, 196, 196, 0.1) 100%);
        backdrop-filter: blur(60px);
        border-radius: 7px;
        border: 1px solid white;
        font-size: 16px;
        color: white;
        font-family: 'Inter';
        font-weight: 400;
        align-items: center;
    }
    select option{
        color:black;
    }
    @media(max-width:900px)
    {
        img,.log_in_info,.child,.sign_up_info_1,.sign_up_info_2{
            width: 220px;
        }
        
        #fullname_input,#email_address_input,#confirm_password_input,#displayname_input,#residence,#password_input{
            width: 185.52px;
        }
        
    }
</style>
<body>
    <div style="display: flex;flex-direction: column;">
        <div class="parent">
            <img src="{% static 'creator_studio_pic.png' %}" alt="creator_studio">
            <div class="child">
                <label id="label_icon">Log In</label>
                <label id="app_msg">Your creative journey starts here</label>
                <div class="log_in_info">
                    <label id="email_label">Email Address <label class="star">*</label></label>
                    <input id="email" placeholder="Email Address" type="email">
                    <label id="password_label">Password <label class="star">*</label></label>
                    <input id="password" placeholder="Password" type="password">
                    <div class="remember">
                        <input type="checkbox" id="remember_input">
                        <label style="font-weight: 400;font-family: Inter;color: white;">Remember Me</label>
                        <label style="font-weight: 400;
                        font-family: Inter;
                        color: #CB102B;
                        margin-left: auto;
                        cursor: pointer;text-align: end;" id="forgot">Forgot Password?</label>
                    </div>
                </div>

                <div class="sign_up_info">
                    <div class="sign_up_info_1">
                        <label id="fullname">Full Name <label class="star">*</label></label>
                        <input placeholder="Full Name" type="text" id="fullname_input">
                        <label id="email_input">Email Address <label class="star">*</label></label>
                        <input placeholder="Email Address" type="email" id="email_address_input">
                        <label id="confirm_password_label">Confirm Password <label class="star">*</label></label>
                        <input placeholder="Confirm Password" type="password" id="confirm_password_input">
                        <label id="source_label">Where did you hear about us? <span class="star">*</span></label>
                        <select id="source_input" style="width: 100%;cursor: pointer;">
                            <option value="Anonymous">Select from the list</option>
                            <option value="Twitter">Twitter</option>
                            <option value="Facebook">Facebook</option>
                            <option value="Instagram">Instagram</option>
                            <option value="Friends">Friends</option>
                            <option value="Youtube">Youtube</option>
                        </select>
                    </div>
                    <div class="sign_up_info_2">
                        <label id="displayname">Display Name <label class="star">*</label></label>
                        <input placeholder="Display Name" type="text" id="displayname_input">
                        <label id="residence_label">Country of Residence <label class="star">*</label></label>
                        <select id="residence" style="width: 100%;cursor: pointer;">
                            <option value="Anonymous">Country of Residence</option>
                            <option value="Pakistan">Pakistan</option>
                            <option value="India">India</option>
                            <option value="Australia">Australia</option>
                            <option value="United Kingdom">United Kingdom</option>
                            <option value="Canada">Canada</option>

                        </select>
                        <label id="password_label_again">Password <label class="star">*</label></label>
                        <input placeholder="Password" type="password" id="password_input">
                    </div>

                </div>
                <button id="log_in_button">Log in</button>
                <button id="sign_up_button">Sign Up</button>
            </div>
            
        </div>
            <label style="font-family: Inter;
                font-weight: 400;
                font-size: 16px;
                color: white;
                margin-bottom: 8px;
                margin-top: 8px;
                text-align: center;
                ">Terms of Service | Privacy Policy | Acceptable Use & Fictional Content Guidelines | Help & Policies Centre</label>
            <hr style="border: 1px solid;
                border-image-source: linear-gradient(90deg, #090F1A 0%, #A7AFBC 49.04%, #090F1A 100%);
                border-image-slice: 1 ;
                margin-bottom: 20px;
                width: 99%;">
    </div>
    <dialog id="dialog"></dialog>
    <script>
        document.body.style.display='none'
        console.log(localStorage.getItem('email'))
        if(localStorage.getItem('email')!==null)
        {
            window.location.replace('/view_admin')
            document.body.style.display='none'
        }
        else{
            document.body.style.display='block'
        }
        let forgot=document.getElementById("forgot");
        let fullname_input=document.getElementById("fullname_input");
        let password_input=document.getElementById("password_input");
        let displayname_input=document.getElementById("displayname_input");
        let confirm_password_input=document.getElementById("confirm_password_input");
        let email_address_input=document.getElementById("email_address_input");
        let source_input=document.getElementById("source_input");
        let residence=document.getElementById("residence");
        let dialog=document.getElementById("dialog");
        let sign_up_button = document.getElementById("sign_up_button");
        let log_in_button = document.getElementById("log_in_button");
        let label_icon=document.getElementById("label_icon");
        let app_msg=document.getElementById("app_msg");
        let email=document.getElementById("email");
        let password=document.getElementById("password");
        let log_in_info=document.getElementsByClassName('log_in_info');
        let sign_up_info=document.getElementsByClassName('sign_up_info');
        sign_up_info[0].style.display='none';
        forgot.addEventListener('click',()=>
        {
            dialog.innerHTML=''
            let forgot_email=document.createElement('input');
            forgot_email.placeholder='Email of your account';
            forgot_email.type='email';
            let submit=document.createElement('button');
            submit.innerText='Submit';
            submit.style.cursor='pointer';
            submit.style.backgroundColor='#CB102B';
            submit.style.color='white';
            submit.style.border='none';
            submit.style.borderRadius='5px';
            submit.style.padding='5px'
            submit.style.marginRight='10px'
            submit.addEventListener('click',()=>
            {
                if(forgot_email.value.length>0)
                {
                    fetch('/creator_studio_login/register',{
                        method:'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body:JSON.stringify({
                            "email":forgot_email.value,
                            "logging_in":'forgot'
                        })
                    })
                    .then(responce=>responce.json())
                    .then(data=>
                    {
                        dialog_label.innerText=data.message
                    })
                }
            })
            let ok=document.createElement('button');
            ok.innerText='Go Back';
            ok.style.cursor='pointer';
            ok.style.backgroundColor='#CB102B';
            ok.style.color='white';
            ok.style.border='none';
            ok.style.borderRadius='5px';
            ok.style.padding='5px'
            ok.addEventListener('click',()=>
            {
                dialog.close()
            })
            dialog.appendChild(forgot_email);
            dialog.appendChild(document.createElement('p'));
            dialog.appendChild(submit)
            dialog.appendChild(ok)
            dialog.appendChild(document.createElement('p'));
            let dialog_label=document.createElement('label');
            dialog.appendChild(dialog_label)
            dialog.showModal()
        })
            
        log_in_button.addEventListener('click',()=>
        {
            if(log_in_button.innerText==='Log in')
            {
                if(email.value.length>0 && password.value.length>0)
                {
                    fetch('/creator_studio_login/register',{
                        method:'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body:JSON.stringify({
                            "email":email.value,
                            "password":password.value,
                            "logging_in":true,
                            "last_login":new Date().toISOString()
                        })
                    })
                    .then(responce=>responce.json())
                    .then(data=>
                    {
                        if(data.success)
                        {
                            localStorage.setItem('email',data.email);
                            window.location.href='/view_admin'
                        }
                        else{
                            dialog.innerHTML=''
                            dialog.showModal();
                            let message=document.createElement('label');
                            message.innerHTML=data.message
                            message.style.color='white'
                            let ok=document.createElement('button');
                            ok.innerText='OK';
                            ok.style.cursor='pointer';
                            ok.style.backgroundColor='#CB102B';
                            ok.style.color='white';
                            ok.style.border='none';
                            ok.style.borderRadius='5px';
                            ok.style.padding='5px'
                            ok.addEventListener('click',()=>
                            {
                                dialog.close();
                            })
                            dialog.appendChild(message);
                            dialog.appendChild(document.createElement('p'));
                            dialog.appendChild(ok);
                        }
                    })
                }    
                
            }
            else{
                if(fullname_input.value.length>0 && displayname_input.value.length>0 && confirm_password_input.value.length>0 && email_address_input.value.length>0 && password_input.value.length>0)
                {
                    fetch('/creator_studio_login/register',{
                        method:'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body:JSON.stringify({
                            "email":email_address_input.value,
                            "password":password_input.value,
                            "confirmpassword":confirm_password_input.value,
                            "fullname":fullname_input.value,
                            "displayname":displayname_input.value,
                            "source":source_input.value,
                            "residence":residence.value,
                            "group":email_address_input.value,
                            "logging_in":false,

                        })
                    })
                    .then(responce=>responce.json())
                    .then(data=>
                    {
                        if(data.success)
                        {
                            sign_up_info[0].style.display='none';
                            log_in_info[0].style.display='flex';
                            label_icon.innerText='Log In';
                            log_in_button.innerText='Log in';
                            sign_up_button.innerText='Sign Up';
                            app_msg.innerText='Your creative journey starts here';
                        }
                        else{
                            dialog.innerHTML=''
                            dialog.showModal();
                            let message=document.createElement('label');
                            message.innerHTML=data.message
                            message.style.color='white'
                            let ok=document.createElement('button');
                            ok.innerText='OK';
                            ok.style.cursor='pointer';
                            ok.style.backgroundColor='#CB102B';
                            ok.style.color='white';
                            ok.style.border='none';
                            ok.style.borderRadius='5px';
                            ok.style.padding='5px'
                            ok.addEventListener('click',()=>
                            {
                                dialog.close();
                            })
                            dialog.appendChild(message);
                            dialog.appendChild(document.createElement('p'));
                            dialog.appendChild(ok);
                        }
                    })
                }
                else{
                    dialog.innerHTML=''
                    dialog.showModal();
                    let message=document.createElement('label');
                    message.innerHTML=`Please provide input to all fields.`
                    message.style.color='white'
                    let ok=document.createElement('button');
                    ok.innerText='OK';
                    ok.style.cursor='pointer';
                    ok.style.backgroundColor='#CB102B';
                    ok.style.color='white';
                    ok.style.border='none';
                    ok.style.borderRadius='5px';
                    ok.style.padding='5px'
                    ok.addEventListener('click',()=>
                    {
                        dialog.close();
                    })
                    dialog.appendChild(message);
                    dialog.appendChild(document.createElement('p'));
                    dialog.appendChild(ok);
                }

            }
        })
        sign_up_button.addEventListener('click',()=>
        {
            log_in_button.innerText=sign_up_button.innerText==="Sign Up"?'Create Account':'Log in';
            label_icon.innerText=sign_up_button.innerText==="Sign Up"?'Sign Up':'Log In';
            app_msg.innerText=sign_up_button.innerText==="Sign Up"?'Regiter yourself to Creator Studio.':'Your creative journey starts here';
            log_in_info[0].style.display=sign_up_button.innerText==="Sign Up"?'none':'flex';
            sign_up_info[0].style.display=sign_up_button.innerText==="Sign Up"?'flex':'none';
            sign_up_button.innerText=sign_up_button.innerText==="Sign Up"?'Log in to your Account':'Sign Up';
        })
    </script>
</body>
</html>